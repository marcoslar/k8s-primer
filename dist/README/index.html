<h1>Kubernetes Primer</h1>

<p>We&rsquo;ll deploy a simple Go webserver application in minikube.</p>

<h2>Containerize your application</h2>

<p>Go to <code>src/</code> and build your application image</p>

<pre><code>$ docker build -t YOUR-HANDLE/hello-world-go:1.0.0 .
</code></pre>

<p>Login into your image registry of choice (i.e., Docker Hub) and publish your image</p>

<pre><code>$ docker login -u YOUR-HANDLE
$ docker push YOUR-HANDLE/hello-world-go:1.0.0
</code></pre>

<h2>Run your container in K8s</h2>

<p>First create a local K8s cluster with 3 nodes using minikube</p>

<pre><code>$ minikube start --nodes 3 -p minikube-lab
</code></pre>

<p>You should get 3 nodes (one of them with the <code>control-plane</code> role)</p>

<pre><code>$ kubectl get nodes -o wide

NAME               STATUS   ROLES           AGE     VERSION   INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME
minikube-lab       Ready    control-plane   2m57s   v1.25.2   192.168.49.2   &lt;none&gt;        Ubuntu 20.04.5 LTS   5.10.104-linuxkit   docker://20.10.18
minikube-lab-m02   Ready    &lt;none&gt;          2m24s   v1.25.2   192.168.49.3   &lt;none&gt;        Ubuntu 20.04.5 LTS   5.10.104-linuxkit   docker://20.10.18
minikube-lab-m03   Ready    &lt;none&gt;          2m7s    v1.25.2   192.168.49.4   &lt;none&gt;        Ubuntu 20.04.5 LTS   5.10.104-linuxkit   docker://20.10.18
</code></pre>

<p>Now you can deploy your container. Go to <code>src/k8s</code> and run:</p>

<pre><code>$ kubectl apply -f pod.yaml
</code></pre>

<p>And check thar your container (within a Pod) is up and running:</p>

<pre><code>$ k get pods -o wide                                                                                                                                                     21:11:24
NAME             READY   STATUS    RESTARTS   AGE   IP           NODE               NOMINATED NODE   READINESS GATES
helloworld-app   1/1     Running   0          11s   10.244.2.2   minikube-lab-m03   &lt;none&gt;           &lt;none&gt;
</code></pre>

<h2>Talk to your app</h2>

<pre><code>$ minikube ssh -p minikube-lab -n minikube-lab-m02
</code></pre>
